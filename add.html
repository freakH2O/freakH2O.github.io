<!--

<div style="text-align: center;">
<h1>ADD POINTER</h1>    
</div>

-->


<!DOCTYPE html>
<html>

<head>
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <title>ADD</title>
    <meta name="viewport" content="initial-scale=1.0">
    <meta charset="utf-8">
    <style>
        #map {
            height: 100%;
        }

        /* Optional: Makes the sample page fill the window. */
        html,
        body {
            height: 100%;
            margin: 0;
        }
    </style>

</head>

<body>
    <form action="https://freakH2O.pythonanywhere.com/add">
        <h6 style="text-align: center;">Only the latest Marker will be taken into consideration </h6>
        <input name="name" placeholder="Enter name">
        <input name="info" placeholder="Enter Info">
        <input name="min" placeholder="Enter Minimum price">
        <input name="max" placeholder="Enter Maximum price">
        <input id="lat" name="lat" placeholder="Latitude">
        <input id="lng" name="lng" placeholder="Longitude">
        <h1 style="text-align: center;">
            <button type="submit" class="btn btn-dark">Submit</button>
        </h1>
    </form>
    <div id="map">
    </div>

    <script>
        var map;
        var lata;
        var langa;
        var markers=[];
        function initMap() {
            map = new google.maps.Map(document.getElementById('map'), {
                center: { lat: -34.397, lng: 150.644 },
                zoom: 8
            });

            function setMapOnAll(map) {
                for (var i = 0; i < markers.length; i++) {
                    markers[i].setMap(map);
                }
            }

            function placeMarker(position, map) {

                var marker = new google.maps.Marker({
                    position: position,
                    map: map
                });
                markers.push(marker);
                map.panTo(position);

            }

            map.addListener('click', function (e) {

                setMapOnAll(null);
                placeMarker(e.latLng, map);
                lata = e.latLng.lat();
                langa = e.latLng.lng();
                document.getElementById("lat").setAttribute("value", lata);
                document.getElementById("lng").setAttribute("value", langa);
                console.log(lata);
                console.log(langa);
            });


        }



    </script>

    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyC6BrTtbUsJxdWJuRPI99wOs_6hXa_WhdU
    &callback=initMap" async defer></script>
</body>

</html>